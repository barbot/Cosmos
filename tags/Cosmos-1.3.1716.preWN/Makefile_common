
.PHONY: lib generator clean sim dir

all: dir lib generator 

dir:
	mkdir -p bin
	mkdir -p includes
	mkdir -p Obj/Cosmos
	mkdir -p Obj/ModelGenerator/Eval
	mkdir -p Obj/ModelGenerator/GspnParser
	mkdir -p Obj/ModelGenerator/LhaParser

lib: includes/spn.hpp includes/spn_orig.hpp includes/LHA.hpp includes/LHA_orig.hpp
	@(cd SOURCES/Cosmos && $(MAKE) ../../bin/libClientSim.a)

includes/%.hpp: SOURCES/Cosmos/%.hpp
	cp SOURCES/Cosmos/$*.hpp $@

generator:
	@(cd SOURCES/ModelGenerator && $(MAKE) ../../bin/Cosmos)

clean:
	@(cd SOURCES/Cosmos && $(MAKE) $@)
	@(cd SOURCES/ModelGenerator && $(MAKE) $@)
	@(rm -rf package-alligator.zip)
#	@(rm -rf package)

cleansim:
	@(cd SOURCES/Cosmos && $(MAKE) clean)

sim:
	@(cd SOURCES/Cosmos && $(MAKE) ../../bin/ClientSim)
	cp SOURCES/Cosmos/spn.hpp includes/
	cp SOURCES/Cosmos/spn_orig.hpp includes/
	cp SOURCES/Cosmos/LHA.hpp includes/
	cp SOURCES/Cosmos/LHA_orig.hpp includes/ 


parser:
	@(cd SOURCES/ModelGenerator && $(MAKE) parser)

cleanparser:
	@(cd SOURCES/ModelGenerator && $(MAKE) cleanparser)

package: all
	mkdir package
	cp Readme.txt package/
	cp COPYING package/
	cp -r includes package/includes
	cp -r bin package/bin