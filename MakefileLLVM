CC=g++
LD=g++
OPTIONS=-O3 -emit-llvm 

all: GenSpnLha_LLVM 
	
GenSpnLha_LLVM: NativeAssembly
	g++  Obj/ModelGenerator/mainLLVM.s Obj/ModelGenerator/Eval/Eval-parser.tab.s  Obj/ModelGenerator/Eval/Eval.s \
 Obj/ModelGenerator/GspnParser/Gspn-parser.tab.s  Obj/ModelGenerator/GspnParser/Gspn-Reader.s \
 Obj/ModelGenerator/LhaParser/Lha-Reader.s Obj/ModelGenerator/LhaParser/Lha-parser.tab.s  \
 Obj/Cosmos/Event.s Obj/Cosmos/EventsQueue.s  \
 Obj/Cosmos/StandardNormalDist.s Obj/Cosmos/ap.s \
 -o bin/CosmosLLVM

NativeAssembly: Bitcode
	$(LD) Obj/ModelGenerator/Eval/Eval-parser.tab.bc -o Obj/ModelGenerator/Eval/Eval-parser.tab.s
	$(LD) Obj/ModelGenerator/Eval/Eval.bc -o Obj/ModelGenerator/Eval/Eval.s	
	$(LD) Obj/ModelGenerator/GspnParser/Gspn-parser.tab.bc -o Obj/ModelGenerator/GspnParser/Gspn-parser.tab.s
	$(LD) Obj/ModelGenerator/GspnParser/Gspn-Reader.bc -o Obj/ModelGenerator/GspnParser/Gspn-Reader.s	
	$(LD) Obj/ModelGenerator/LhaParser/Lha-parser.tab.bc -o Obj/ModelGenerator/LhaParser/Lha-parser.tab.s
	$(LD) Obj/ModelGenerator/LhaParser/Lha-Reader.bc -o Obj/ModelGenerator/LhaParser/Lha-Reader.s
	$(LD) Obj/ModelGenerator/mainLLVM.bc -o Obj/ModelGenerator/mainLLVM.s
	$(LD) Obj/Cosmos/Event.bc -o Obj/Cosmos/Event.s
	$(LD) Obj/Cosmos/EventsQueue.bc -o  Obj/Cosmos/EventsQueue.s
	$(LD) Obj/Cosmos/StandardNormalDist.bc -o Obj/Cosmos/StandardNormalDist.s
	$(LD) Obj/Cosmos/ap.bc -o Obj/Cosmos/ap.s
	
Bitcode: 
	$(CC) $(OPTIONS) SOURCES/ModelGenerator/Eval/Eval-parser.tab.cc -c -o Obj/ModelGenerator/Eval/Eval-parser.tab.bc
	$(CC) $(OPTIONS) SOURCES/ModelGenerator/Eval/Eval.cpp -c -o Obj/ModelGenerator/Eval/Eval.bc	
	$(CC) $(OPTIONS) SOURCES/ModelGenerator/GspnParser/Gspn-parser.tab.cc -c -o Obj/ModelGenerator/GspnParser/Gspn-parser.tab.bc
	$(CC) $(OPTIONS) SOURCES/ModelGenerator/GspnParser/Gspn-Reader.cpp -c -o Obj/ModelGenerator/GspnParser/Gspn-Reader.bc	
	$(CC) $(OPTIONS) SOURCES/ModelGenerator/LhaParser/Lha-parser.tab.cc -c -o Obj/ModelGenerator/LhaParser/Lha-parser.tab.bc
	$(CC) $(OPTIONS) SOURCES/ModelGenerator/LhaParser/Lha-Reader.cpp -c -o Obj/ModelGenerator/LhaParser/Lha-Reader.bc	
	$(CC) $(OPTIONS) SOURCES/ModelGenerator/mainLLVM.cpp -c -o Obj/ModelGenerator/mainLLVM.bc
	$(CC) $(OPTIONS) SOURCES/Cosmos/Event.cpp -c -o Obj/Cosmos/Event.bc
	$(CC) $(OPTIONS) SOURCES/Cosmos/EventsQueue.cpp -c -o  Obj/Cosmos/EventsQueue.bc
	$(CC) $(OPTIONS) SOURCES/Cosmos/StandardNormalDist.cpp -c -o Obj/Cosmos/StandardNormalDist.bc
	$(CC) $(OPTIONS) SOURCES/Cosmos/ap.cpp -c -o Obj/Cosmos/ap.bc
	

